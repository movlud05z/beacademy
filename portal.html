<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BEAcademy | Tədris Portalı</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
body.dynamic-body{background:#1a1a1a;font-family:'Poppins',sans-serif;margin:0;padding:40px;color:#fff}
.logo{font-size:24px;font-weight:800;text-transform:uppercase}
.be{color:#fff}.academy{color:#e60000}
.portal-card{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);padding:30px;border-radius:15px;text-align:center;transition:.3s;cursor:pointer}
.portal-card:hover{background:rgba(230,0,0,.1);transform:translateY(-5px);border-color:#e60000}
.login-btn{background:#e60000;color:#fff;border:none;padding:10px 20px;border-radius:5px;font-weight:700;width:100%;margin-top:15px}
#profileModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:9999}
.modal-container{background:#fff;max-width:450px;margin:80px auto;padding:30px;border-radius:15px;text-align:center;color:#333}
.close-btn{position:absolute;right:20px;top:15px;font-size:30px;cursor:pointer}
.search-section{margin-top:50px;background:rgba(255,255,255,.05);padding:30px;border-radius:15px}
.staff-card{background:#fff;padding:12px;border-radius:8px;margin-top:10px;color:#333;display:flex;justify-content:space-between;cursor:pointer}
</style>
</head>

<body class="dynamic-body">

<header style="display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.2);padding-bottom:20px">
<div class="logo"><span class="be">BE</span><span class="academy">Academy</span></div>
<div style="display:flex;gap:20px">
<span onclick="openMyProfile()" style="cursor:pointer">Xoş gəldin, <b id="userNamePortal" style="color:#e60000">...</b></span>
<a href="index.html" onclick="localStorage.removeItem('currentUser')" style="background:#e60000;color:#fff;padding:6px 15px;border-radius:4px;text-decoration:none">ÇIXIŞ</a>
</div>
</header>

<h1 style="margin:40px 0 20px;font-size:22px">Tədris Bölmələri</h1>

<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px">
<div class="portal-card" data-link="it.html"><h3>İT</h3><button class="login-btn">DAXİL OL</button></div>
<div class="portal-card" data-link="kea.html"><h3>KEA</h3><button class="login-btn">DAXİL OL</button></div>
<div class="portal-card" data-link="beyaz.html"><h3>BƏYAZ ƏŞYA</h3><button class="login-btn">DAXİL OL</button></div>
<div class="portal-card" data-link="tv.html"><h3>TV</h3><button class="login-btn">DAXİL OL</button></div>
<div class="portal-card" data-link="exam.html"><h3>İMTAHANLAR</h3><button class="login-btn" style="background:#2ecc71">YOXLA</button></div>
<div class="portal-card" data-link="resources.html"><h3>AKADEMİYA RESURLARI</h3><button class="login-btn" style="background:#333">BAX</button></div>
</div>

<div class="search-section">
<input id="staffSearchInput" oninput="searchStaff()" placeholder="Ad yaz..." style="width:100%;padding:12px">
<div id="staffSearchResults"></div>
</div>

<div id="profileModal">
<div class="modal-container">
<span class="close-btn" onclick="profileModal.style.display='none'">&times;</span>
<div id="profInit" style="font-size:32px;font-weight:800;color:#e60000"></div>
<h2 id="profName"></h2>
<p id="profUser"></p>
</div>
</div>

<script>
const DB_URL="https://beacademy-c8316-default-rtdb.firebaseio.com/users";
const currentLog=localStorage.getItem("currentUser");

window.onload=async()=>{
if(!currentLog)return;
const r=await fetch(`${DB_URL}/${currentLog}.json`);
const u=await r.json();
if(u?.fullname)userNamePortal.innerText=u.fullname;
};

document.querySelectorAll(".portal-card").forEach(c=>{
c.onclick=()=>location.href=c.dataset.link;
});

async function openMyProfile(user){
const t=user||currentLog;if(!t)return;
const r=await fetch(`${DB_URL}/${t}.json`);
const u=await r.json();if(!u)return;
profileModal.style.display="block";
profName.innerText=u.fullname;
profUser.innerText="@"+u.username;
profInit.innerText=u.fullname[0];
}

async function searchStaff(){
const v=staffSearchInput.value.toLowerCase();
if(v.length<2)return staffSearchResults.innerHTML="";
const r=await fetch(`${DB_URL}.json`);
const users=await r.json();staffSearchResults.innerHTML="";
Object.values(users||{}).forEach(u=>{
if(u.fullname?.toLowerCase().includes(v))
staffSearchResults.innerHTML+=`<div class="staff-card" onclick="openMyProfile('${u.username}')"><b>${u.fullname}</b><span>@${u.username}</span></div>`;
});
}
</script>

</body>
</html>
