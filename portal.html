<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEAcademy | Tədris Portalı</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body.dynamic-body { background: #1a1a1a; font-family: 'Poppins', sans-serif; margin: 0; padding: 40px; color: #fff; }
        .logo { font-size: 24px; font-weight: 800; text-transform: uppercase; }
        .be { color: #fff; } .academy { color: #e60000; }
        .portal-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; text-align: center; transition: 0.3s; cursor: pointer; position: relative; overflow: hidden; }
        .portal-card:hover { background: rgba(230, 0, 0, 0.1); transform: translateY(-5px); border-color: #e60000; }
        .login-btn { background: #e60000; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; font-weight: 700; cursor: pointer; width: 100%; margin-top: 15px; transition: 0.3s; }
        #structureModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 10000; backdrop-filter: blur(10px); overflow-y: auto; padding: 20px; }
        .org-container { max-width: 1000px; margin: 50px auto; text-align: center; color: #fff; }
        .org-node { background: #fff; color: #000; padding: 15px; border-radius: 10px; display: inline-block; min-width: 180px; border-top: 5px solid #e60000; box-shadow: 0 5px 15px rgba(230, 0, 0, 0.3); margin: 10px; }
        .org-node b { display: block; font-size: 14px; margin-bottom: 5px; }
        .org-node span { font-size: 11px; color: #666; font-weight: 700; text-transform: uppercase; }
        .line-v { width: 2px; height: 30px; background: #e60000; margin: 0 auto; }
        .line-h-container { display: flex; justify-content: center; align-items: center; }
        .line-h { height: 2px; background: #e60000; flex-grow: 1; max-width: 600px; }
        .architect-node { border-top: 5px solid #0095F6 !important; box-shadow: 0 5px 15px rgba(0, 149, 246, 0.4); margin-top: 40px; }
        #profileModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 9999; backdrop-filter: blur(8px); }
        .modal-container { background: #fff; max-width: 450px; margin: 80px auto; padding: 30px; border-radius: 15px; position: relative; text-align: center; color: #333; }
        .close-btn { position: absolute; right: 20px; top: 15px; font-size: 30px; cursor: pointer; color: #000; }
        .search-section { margin-top: 50px; background: rgba(255, 255, 255, 0.05); padding: 30px; border-radius: 15px; }
        .staff-card { background: #fff; padding: 12px; border-radius: 8px; margin-top: 10px; color: #333; display: flex; justify-content: space-between; cursor: pointer; }
    </style>
</head>
<body class="dynamic-body">

<header style="display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,0.2);padding-bottom:20px;">
    <div class="logo"><span class="be">BE</span><span class="academy">Academy</span></div>
    <button onclick="document.getElementById('structureModal').style.display='block'" style="background:transparent;border:2px solid #fff;color:#fff;padding:8px 20px;border-radius:30px;font-weight:800;cursor:pointer;font-size:11px;">AKADEMİYA STRUKTURU</button>
    <div style="display:flex;gap:20px;">
        <span onclick="openMyProfile()" style="cursor:pointer;">Xoş gəldin, <b id="userNamePortal" style="color:#e60000;">...</b></span>
        <a href="index.html" onclick="localStorage.removeItem('currentUser')" style="background:#e60000;color:#fff;padding:6px 15px;border-radius:4px;text-decoration:none;">ÇIXIŞ</a>
    </div>
</header>

<!-- DİZAYN HİSSƏLƏRİ DƏYİŞMƏYİB -->

<script>
const DB_URL = "https://beacademy-c8316-default-rtdb.firebaseio.com/users";
const currentLog = localStorage.getItem("currentUser");

window.onload = async () => {
    if (!currentLog) return;
    try {
        const res = await fetch(`${DB_URL}/${currentLog}.json`);
        const u = await res.json();
        if (u?.fullname) document.getElementById("userNamePortal").innerText = u.fullname;
    } catch(e){}
};

async function openMyProfile(user) {
    const target = user || currentLog;
    if (!target) return;
    try {
        const res = await fetch(`${DB_URL}/${target}.json`);
        const u = await res.json();
        if (!u) return;
        profileModal.style.display = "block";
        profName.innerText = u.fullname;
        profUser.innerText = "@" + u.username;
        profInit.innerText = u.fullname[0];
    } catch(e){}
}

async function searchStaff() {
    const v = staffSearchInput.value.toLowerCase();
    if (v.length < 2) return staffSearchResults.innerHTML = "";
    const res = await fetch(`${DB_URL}.json`);
    const users = await res.json();
    staffSearchResults.innerHTML = "";
    if (!users) return;
    Object.values(users).forEach(u=>{
        if (u.fullname?.toLowerCase().includes(v))
            staffSearchResults.innerHTML += `<div class="staff-card" onclick="openMyProfile('${u.username}')"><b>${u.fullname}</b><span>@${u.username}</span></div>`;
    });
}

document.querySelectorAll(".portal-card").forEach(card=>{
    card.querySelector("button").onclick=()=>{
        const t = card.querySelector("h3").innerText;
        location.href = t==="İT"?"it.html":
                        t==="KEA"?"kea.html":
                        t==="BƏYAZ ƏŞYA"?"beyaz.html":
                        t==="TV"?"tv.html":
                        t==="İMTAHANLAR"?"exam.html":
                        "resources.html";
    };
});
</script>

</body>
</html>
