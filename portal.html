<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEAcademy | Hyper-Lux Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Space+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body.dynamic-body { background: #050505; font-family: 'Poppins', sans-serif; margin: 0; padding: 40px; color: #fff; overflow-x: hidden; }
        .logo { font-size: 24px; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; }
        .be { color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.3); } 
        .academy { color: #e60000; text-shadow: 0 0 15px rgba(230,0,0,0.5); }
        
        .portal-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.05); padding: 30px; border-radius: 20px; text-align: center; transition: 0.5s cubic-bezier(0.2, 1, 0.3, 1); cursor: pointer; position: relative; overflow: hidden; backdrop-filter: blur(5px); }
        .portal-card:hover { background: rgba(230, 0, 0, 0.08); transform: translateY(-10px) scale(1.02); border-color: #e60000; box-shadow: 0 20px 40px rgba(230,0,0,0.2); }
        .login-btn { background: #e60000; color: #fff; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; margin-top: 15px; transition: 0.3s; letter-spacing: 1px; }

        /* MODAL LUX */
        #structureModal, #profileModal, #contentModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.98); z-index: 10000; backdrop-filter: blur(25px); overflow-y: auto; padding: 20px; }
        .modal-container { background: #fff; max-width: 500px; margin: 60px auto; border-radius: 30px; position: relative; text-align: center; color: #333; box-shadow: 0 0 100px rgba(0,0,0,0.8); border: 1px solid rgba(255,255,255,0.1); animation: modalIn 0.6s cubic-bezier(0.23, 1, 0.32, 1); }
        @keyframes modalIn { from { opacity: 0; transform: translateY(50px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }
        
        .close-btn { position: absolute; right: 25px; top: 20px; font-size: 35px; cursor: pointer; color: #000; z-index: 100; transition: 0.3s; }

        /* LUX PROFILE ELEMENTS */
        .lux-header { height: 160px; border-radius: 30px 30px 0 0; margin-bottom: 60px; position: relative; overflow: hidden; background: #000; }
        .lux-header::before { content: ''; position: absolute; width: 200%; height: 200%; background: conic-gradient(from 0deg at 50% 50%, #000, #1a1a1a, #000); animation: rotateBg 10s linear infinite; }
        @keyframes rotateBg { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .lux-avatar-wrap { position: absolute; bottom: -50px; left: 50%; transform: translateX(-50%); z-index: 10; }
        .lux-avatar { width: 120px; height: 120px; background: #fff; border-radius: 50%; border: 6px solid #fff; box-shadow: 0 20px 40px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; font-size: 50px; font-weight: 800; color: #e60000; overflow: hidden; }
        .lux-avatar img { width: 100%; height: 100%; object-fit: cover; }

        /* DECODER TEXT EFFECT */
        .decode-text { font-family: 'Space Mono', monospace; font-weight: 800; font-size: 32px; color: #000; display: block; min-height: 48px; }
        
        .premium-glow { position: absolute; top: -8px; left: -8px; right: -8px; bottom: -8px; border-radius: 50%; background: linear-gradient(45deg, #0095F6, #00f2fe, #0095F6); animation: spin 2s linear infinite; padding: 3px; -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .gold-tag { background: linear-gradient(90deg, #d4af37, #f7ef8a, #d4af37); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 10px; font-weight: 900; letter-spacing: 4px; margin-bottom: 10px; display: block; }

        .staff-card { background: rgba(255,255,255,0.95); padding: 18px; border-radius: 15px; margin-top: 15px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: 0.4s; border: 1px solid transparent; }
        .staff-card:hover { transform: scale(1.05); box-shadow: 0 15px 30px rgba(0,0,0,0.3); border-color: #0095f6; }
        .premium-card { background: linear-gradient(90deg, #fff, #eef9ff) !important; border-left: 8px solid #0095f6 !important; }

        .verified-badge { width: 22px; height: 22px; margin-left: 8px; vertical-align: middle; }
    </style>
</head>
<body class="dynamic-body">

    <header style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 30px;">
        <div class="logo"><span class="be">BE</span><span class="academy">Academy</span></div>
        <div style="display: flex; align-items: center; gap: 25px;">
            <button onclick="document.getElementById('structureModal').style.display='block'" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 10px 25px; border-radius: 50px; font-weight: 600; cursor: pointer; font-size: 11px; letter-spacing: 1px;">SİSTEM STRUKTURU</button>
            <span style="cursor: pointer; font-size: 14px; font-weight: 600;" onclick="openMyProfile()">
                SALAM, <b id="userNamePortal" style="color: #e60000; letter-spacing: 1px;">...</b>
            </span>
            <a href="index.html" onclick="localStorage.removeItem('currentUser')" style="color: #fff; font-weight: 800; text-decoration: none; background: #e60000; padding: 10px 22px; border-radius: 12px; font-size: 11px;">ÇIXIŞ</a>
        </div>
    </header>

    <h1 style="color: #fff; margin: 60px 0 30px; font-weight: 800; text-transform: uppercase; font-size: 24px; letter-spacing: 2px;">Akademiya Portalı</h1>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px;">
        <div class="portal-card" onclick="openSection('IT')"><h3>İT</h3><button class="login-btn">MODULE ACCESS</button></div>
        <div class="portal-card" onclick="openSection('KEA')"><h3>KEA</h3><button class="login-btn">MODULE ACCESS</button></div>
        <div class="portal-card" onclick="openSection('BEYAZ')"><h3>BƏYAZ ƏŞYA</h3><button class="login-btn">MODULE ACCESS</button></div>
        <div class="portal-card" onclick="openSection('TV')"><h3>TV</h3><button class="login-btn">MODULE ACCESS</button></div>
        <div class="portal-card" style="border-color: #2ecc71;" onclick="openSection('EXAMS')"><h3 style="color: #2ecc71;">EXAM CENTER</h3><button class="login-btn" style="background: #2ecc71;">START</button></div>
        <div class="portal-card" onclick="openSection('RESOURCES')"><h3>DATABASE</h3><button class="login-btn" style="background:#1a1a1a;">BROWSE</button></div>
    </div>

    <div class="search-section" style="margin-top: 80px;">
        <h2 style="color: rgba(255,255,255,0.4); font-size: 12px; letter-spacing: 4px; font-weight: 800; margin-bottom: 20px;">GLOBAL DIRECTORY</h2>
        <input type="text" id="staffSearchInput" oninput="searchStaff()" placeholder="Search employee database..." style="width:100%; max-width:500px; padding:20px; border-radius:15px; border:1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.02); color: #fff; font-size: 16px; outline: none; transition: 0.3s; box-shadow: inset 0 0 20px rgba(0,0,0,0.5);">
        <div id="staffSearchResults" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; margin-top: 30px;"></div>
    </div>

    <div id="profileModal">
        <div class="modal-container" style="overflow: hidden; border: none; padding-bottom: 50px;">
            <span class="close-btn" onclick="document.getElementById('profileModal').style.display='none'">&times;</span>
            <div class="lux-header" id="luxHeader"></div>
            <div class="lux-avatar-wrap">
                <div id="premiumGlow"></div>
                <div class="lux-avatar" id="profInit"></div>
            </div>
            <div style="padding: 0 40px;">
                <span id="goldTag" class="gold-tag" style="display: none;">— EXCLUSIVE ACCESS —</span>
                <div id="profName" class="decode-text"></div>
                <p id="profUser" style="color:#aaa; font-weight:600; font-size: 14px; margin: 10px 0 30px 0; font-family: 'Space Mono';"></p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div style="background: #f8f8f8; padding: 20px; border-radius: 20px; text-align: left;">
                        <small style="color: #bbb; font-weight: 800; font-size: 9px; letter-spacing: 2px;">SECURITY</small>
                        <div id="verifStatus" style="font-weight: 700; font-size: 13px; margin-top: 5px;">Level 1</div>
                    </div>
                    <div style="background: #f8f8f8; padding: 20px; border-radius: 20px; text-align: left;">
                        <small style="color: #bbb; font-weight: 800; font-size: 9px; letter-spacing: 2px;">NETWORK</small>
                        <div style="font-weight: 700; font-size: 13px; margin-top: 5px;">BE-Global</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="structureModal">
        <span class="close-btn" onclick="document.getElementById('structureModal').style.display='none'" style="color:#fff">&times;</span>
        <div class="modal-container" style="max-width: 900px; background: none; color: #fff; box-shadow: none;">
            <h2 style="letter-spacing: 5px;">OFFICIAL HIERARCHY</h2>
            <div style="margin-top: 50px;">
                <div style="background:#fff; color:#000; padding:20px; border-radius:15px; display:inline-block; border-bottom: 5px solid #e60000;">
                    <small style="color:#888;">HEAD OF ACADEMY</small><br><b>Elçin Mahmudov</b>
                </div>
            </div>
        </div>
    </div>

    <div id="contentModal">
        <div class="modal-container" style="max-width: 700px; text-align: left; padding: 40px;">
            <span class="close-btn" onclick="document.getElementById('contentModal').style.display='none'">&times;</span>
            <h2 id="sectionTitle" style="color:#e60000; font-weight: 800;"></h2>
            <div id="sectionBody" style="margin-top:30px; line-height: 1.8;"></div>
        </div>
    </div>

    <script>
        const DB_URL = "https://beacademy-c8316-default-rtdb.firebaseio.com/users";
        const CONTENT_URL = "https://beacademy-c8316-default-rtdb.firebaseio.com/portal_content";
        const currentLog = localStorage.getItem("currentUser");
        const blueTick = `<img src="https://upload.wikimedia.org/wikipedia/commons/e/e4/Twitter_Verified_Badge.svg" class="verified-badge">`;

        // YAZI DECODE EFFEKTİ (HYPER-LUX)
        function decodeEffect(element, finalName, hasTick) {
            const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&*";
            let iteration = 0;
            const interval = setInterval(() => {
                element.innerText = finalName.split("")
                    .map((letter, index) => {
                        if(index < iteration) return finalName[index];
                        return letters[Math.floor(Math.random() * letters.length)];
                    }).join("");
                
                if(iteration >= finalName.length) {
                    clearInterval(interval);
                    if(hasTick) element.innerHTML += blueTick;
                }
                iteration += 1 / 3;
            }, 30);
        }

        window.onload = async () => {
            if(!currentLog) return;
            const res = await fetch(`${DB_URL}/${currentLog}.json`);
            const u = await res.json();
            if(u) document.getElementById("userNamePortal").innerHTML = u.fullname.toUpperCase();
        };

        async function openMyProfile(user) {
            const target = user || currentLog;
            const res = await fetch(`${DB_URL}/${target}.json`);
            const u = await res.json();
            if(u) {
                document.getElementById("profileModal").style.display = "block";
                
                // Decode effect tətbiqi
                const nameEl = document.getElementById("profName");
                nameEl.innerText = "";
                setTimeout(() => decodeEffect(nameEl, u.fullname.toUpperCase(), u.isVerified), 200);

                document.getElementById("profUser").innerText = "ID-REF: " + u.username.toUpperCase();
                
                const avatarDiv = document.getElementById("profInit");
                avatarDiv.innerHTML = u.img ? `<img src="${u.img}">` : u.fullname[0];

                const glow = document.getElementById("premiumGlow");
                const goldTag = document.getElementById("goldTag");
                const vStatus = document.getElementById("verifStatus");
                const header = document.getElementById("luxHeader");

                if(u.isVerified) {
                    glow.className = "premium-glow";
                    goldTag.style.display = "block";
                    vStatus.innerText = "VERIFIED ELITE";
                    vStatus.style.color = "#0095f6";
                    header.style.background = "#000";
                } else {
                    glow.className = "";
                    goldTag.style.display = "none";
                    vStatus.innerText = "AUTHORIZED USER";
                    vStatus.style.color = "#333";
                    header.style.background = "#111";
                }
            }
        }

        async function searchStaff() {
            const val = document.getElementById("staffSearchInput").value.toLowerCase();
            const resDiv = document.getElementById("staffSearchResults");
            if(val.length < 2) { resDiv.innerHTML = ""; return; }
            const res = await fetch(`${DB_URL}.json`);
            const users = await res.json();
            resDiv.innerHTML = "";
            Object.values(users).forEach(u => {
                if(u.fullname && u.fullname.toLowerCase().includes(val)) {
                    const isPrem = u.isVerified ? 'premium-card' : '';
                    resDiv.innerHTML += `
                    <div class="staff-card ${isPrem}" onclick="openMyProfile('${u.username}')">
                        <div style="display:flex; align-items:center; gap:15px;">
                            <div style="width:45px; height:45px; border-radius:50%; background:#000; display:flex; align-items:center; justify-content:center; overflow:hidden; border: 2px solid ${u.isVerified?'#0095f6':'#eee'}">
                                ${u.img ? `<img src="${u.img}" style="width:100%; height:100%; object-fit:cover;">` : `<b style="color:#fff; font-size:12px">${u.fullname[0]}</b>`}
                            </div>
                            <div style="line-height:1.2">
                                <b style="font-size:14px; color:#000; letter-spacing:0.5px;">${u.fullname.toUpperCase()}</b><br>
                                <span style="font-size:10px; color:#888; font-family:'Space Mono'">@${u.username}</span>
                            </div>
                        </div>
                        <span style="color:#000; font-weight:900; opacity:0.3">ACCESS</span>
                    </div>`;
                }
            });
        }

        async function openSection(sectionId) {
            const modal = document.getElementById("contentModal");
            modal.style.display = "block";
            document.getElementById("sectionTitle").innerText = sectionId + " DATABASE";
            document.getElementById("sectionBody").innerHTML = "Decrypting files...";
            const res = await fetch(`${CONTENT_URL}/${sectionId}.json`);
            let data = await res.json();
            document.getElementById("sectionBody").innerHTML = data || "No records found.";
        }
    </script>
</body>
</html>
